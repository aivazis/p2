// -*- c++ -*-
//
// michael a.g. aïvázis <michael.aivazis@para-sim.com>
// (c) 1998-2020 all rights reserved

// code guard
#if !defined(pyre_journal_Inventory_icc)
#error This header contains implementation details of pyre::journal::Inventory
#else


// metamethods
template <bool stateV>
pyre::journal::Inventory<stateV>::
Inventory(state_type state, device_type * device) :
    _state(state),
    _device(device)
{}


// syntactic sugar
template <bool stateV>
pyre::journal::Inventory<stateV>::
operator bool() const
{
    // always off
    return state();
}


// interface
// accessors
template <bool stateV>
auto
pyre::journal::Inventory<stateV>::
state() const -> state_type
{
    // easy enough
    return _state;
}


template <bool stateV>
auto
pyre::journal::Inventory<stateV>::
device() const -> device_type *
{
    // easy enough
    return _device;
}


template <bool stateV>
constexpr auto
pyre::journal::Inventory<stateV>::
defaultState() -> state_type
{
    // easy enough
    return stateV;
}


// mutators
template <bool stateV>
void
pyre::journal::Inventory<stateV>::
activate()
{
    // turn it on
    _state = true;
    // all done
    return;
}


template <bool stateV>
void
pyre::journal::Inventory<stateV>::
deactivate()
{
    // turn it off
    _state = false;
    // all done
    return;
}


template <bool stateV>
auto
pyre::journal::Inventory<stateV>::
device(device_type * device) -> device_type *
{
    // save the old one
    device_type * old = _device;
    // attach the new one
    _device = device;
    // return the old one
    return old;
}


#endif

// end of file
